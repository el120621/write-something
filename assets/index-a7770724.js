(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();document.addEventListener("DOMContentLoaded",function(){const p=document.getElementById("save-drawing"),r=document.getElementById("canvas"),o=r.getContext("2d"),i=document.getElementById("color-picker"),e=document.getElementById("pen-width");let t=!1,c=0,f=0;(async()=>{const n=await fetch("https://6480778ff061e6ec4d495544.mockapi.io/api/v1/drawing/1"),{drawing:g}=await n.json();fetch(g).then(a=>a.blob()).then(a=>{const d=new FileReader;d.onloadend=function(){const l=d.result,s=new Image;s.src=l,s.onload=function(){o.drawImage(s,0,0)}},d.readAsDataURL(a)}).catch(a=>{console.error("Error:",a)})})();function h(n){t=!0,[c,f]=[n.offsetX,n.offsetY]}function u(n){t&&(o.strokeStyle=i.value,o.lineWidth=e.value,o.lineJoin="round",o.lineCap="round",o.beginPath(),o.moveTo(c,f),o.lineTo(n.offsetX,n.offsetY),o.stroke(),[c,f]=[n.offsetX,n.offsetY])}function m(){t=!1}r.addEventListener("mousedown",h),r.addEventListener("mousemove",u),r.addEventListener("mouseup",m),r.addEventListener("mouseout",m),i.addEventListener("change",u),e.addEventListener("input",u),document.getElementById("save-drawing").addEventListener("submit",async function(n){if(n.preventDefault(),!grecaptcha.getResponse())return alert("pls answer recaptcha"),n.target.reset();try{const d=r.toDataURL().split(",")[1],l=new FormData;l.append("key","7092a02a2e06f4b04ea6fcc2335251a1"),l.append("image",d),fetch("https://api.imgbb.com/1/upload",{method:"POST",body:l}).then(s=>s.json()).then(async s=>{const y={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({drawing:s.data.url})};return await fetch("https://6480778ff061e6ec4d495544.mockapi.io/api/v1/drawing/1",y)}).catch(s=>{console.error("Error:",s)}),grecaptcha.reset(),n.target.reset(),p.style.display="none",alert("Saved successfully")}catch(a){alert("Error saving",a.message),console.log("Error saving",a.message)}})});
